<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9Im9wc0dyYWRpZW50IiB4MT0iMTAiIHkxPSIxMCIgeDI9IjU0IiB5Mj0iNTQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDBjNGZmIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZjNiZGMiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHJ4PSIxNiIgZmlsbD0iIzExMTUyYSIgLz4KICA8Y2lyY2xlIGN4PSIzMiIgY3k9IjMyIiByPSIyMSIgZmlsbD0idXJsKCNvcHNHcmFkaWVudCkiIG9wYWNpdHk9IjAuOSIgLz4KICA8cGF0aCBkPSJNMjAgNDAgQzI2IDUwIDM4IDUyIDQ1IDM0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmNmY3ZmYiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgogIDxjaXJjbGUgY3g9IjI0IiBjeT0iMjYiIHI9IjUiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOTIiIC8+CiAgPGNpcmNsZSBjeD0iNDIiIGN5PSIzOCIgcj0iNC41IiBmaWxsPSIjZmZmZmZmIiBvcGFjaXR5PSIwLjc4IiAvPgogIDxjaXJjbGUgY3g9IjM0IiBjeT0iMTgiIHI9IjMuNSIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC42NSIgLz4KPC9zdmc+Cg==" />
    <title>Ops Online Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script>
      // Custom Tailwind theme configuration to match the original design's aesthetic
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#00c4ff',
              accent: {
                DEFAULT: '#ff3bdc',
                dark: '#e000be',
              },
              'dark-bg': '#13162a',
              'dark-card': 'rgba(32,26,49,0.91)',
              'dark-footer': '#251541',
              'dark-modal': '#251541',
              'light-text': '#333',
              'dark-text': '#fafbfe',
            },
            boxShadow: {
              'card-light': '0 2px 28px rgba(182, 185, 247, 0.66), -20px 20px 40px hsla(270, 42%, 45%, 0.18)',
              'card-dark': '0 2px 24px rgba(17, 20, 43, 0.53)',
              'card-light-hover': '0 4px 32px rgba(255, 59, 220, 0.13)',
            },
            dropShadow: {
              'logo-glow': '0 0 8px #ffb3fd',
              'icon-glow-light': '0 0 2px rgba(255, 239, 47, 0.33)',
              'icon-glow-dark': '0 0 2px rgba(0, 196, 255, 0.33)',
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="./assets/app.css" />
    <script>
      (() => {
        const SUPPORTED_STACKS = ['google', 'cloudflare', 'tinyml', 'chattia7'];
        const FALLBACK_STACK = 'chattia7';
        const currentStack = window.__ACTIVE_SERVICE_STACK__;

        // Persist the resolved stack on the global scope so the TypeScript layer can read it.
        const activeStack = SUPPORTED_STACKS.includes(currentStack)
          ? currentStack
          : FALLBACK_STACK;
        window.__ACTIVE_SERVICE_STACK__ = activeStack;

        const tinyStackTargets = new Set(['tinyml', 'chattia7']);
        const shouldLoadTinyStack = tinyStackTargets.has(activeStack);

        // CDN references documented by the providers:
        // - WebLLM: https://mlc.ai/web-llm/ (via jsDelivr package @mlc-ai/web-llm)
        // - TensorFlow.js: https://www.tensorflow.org/js/guide/importing#via_script_tags
        // - Toxicity model: https://github.com/tensorflow/tfjs-models/tree/master/toxicity
        const cdnScripts = shouldLoadTinyStack
          ? [
              'https://cdn.jsdelivr.net/npm/@mlc-ai/web-llm@0.2.42/lib/tvmjs_runtime.wasi.js',
              'https://cdn.jsdelivr.net/npm/@mlc-ai/web-llm@0.2.42/lib/web-llm.js',
              'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.18.0/dist/tf.min.js',
              'https://cdn.jsdelivr.net/npm/@tensorflow-models/toxicity@1.3.2/dist/toxicity.min.js',
            ]
          : [];

        window.__tinyStackReady__ = cdnScripts.reduce(
          (promise, src) =>
            promise.then(
              () =>
                new Promise((resolve, reject) => {
                  const script = document.createElement('script');
                  script.src = src;
                  script.async = false;
                  script.onload = () => resolve();
                  script.onerror = (event) => {
                    console.error('Failed to load Tiny stack dependency:', src, event);
                    reject(event);
                  };
                  document.head.appendChild(script);
                })
            ),
          Promise.resolve()
        );
      })();
    </script>
    <script type="module" src="./assets/app.js"></script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
