var o="ops-pwa-v2",c=`${o}-shell`,i=`${o}-runtime`,f=`${o}-fonts`,u=["/","/index.html","/assets/app.js","/assets/app.css","/public/manifest.json","/public/icons/ops-icon.svg"];self.addEventListener("install",t=>{t.waitUntil(caches.open(c).then(e=>e.addAll(u)).then(()=>self.skipWaiting()))});self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(e=>Promise.all(e.filter(s=>![c,i,f].includes(s)).map(s=>caches.delete(s)))).then(()=>self.clients.claim()))});var r=async(t,e,s)=>{s&&s.ok&&await(await caches.open(t)).put(e,s.clone())},l=async(t,e)=>{try{let s=await fetch(t);return await r(e,t,s),s}catch(s){let a=await(await caches.open(e)).match(t);if(a)return a;throw s}},d=async(t,e)=>{let n=await(await caches.open(e)).match(t),a=fetch(t).then(h=>(r(e,t,h),h.clone())).catch(()=>{});return n??await a??fetch(t)},p=async(t,e)=>{let n=await(await caches.open(e)).match(t);if(n)return n;let a=await fetch(t);return await r(e,t,a),a};self.addEventListener("fetch",t=>{let{request:e}=t;if(e.method!=="GET")return;let s=new URL(e.url);if(e.mode==="navigate"){t.respondWith(l(e,c).catch(async()=>await(await caches.open(c)).match("/index.html")??Response.error()));return}if(s.origin===self.location.origin){if(s.pathname.startsWith("/assets/")){t.respondWith(d(e,i));return}if(s.pathname.startsWith("/public/icons/")||s.pathname.endsWith("manifest.json")){t.respondWith(p(e,c));return}}if(s.pathname.startsWith("/api/")||s.pathname.endsWith(".json")){t.respondWith(l(e,i));return}if(s.hostname.includes("fonts.googleapis.com")||s.hostname.includes("fonts.gstatic.com")||s.hostname.includes("cdnjs.cloudflare.com")){t.respondWith(p(e,f));return}t.respondWith(d(e,i))});self.addEventListener("message",t=>{t.data&&t.data.type==="SKIP_WAITING"&&self.skipWaiting()});
